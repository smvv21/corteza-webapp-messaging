<template>
  <section>
    <div>
      <router-link
        v-if="link && canCreate"
        :to="link"
        @click.native="$emit('close')"
      >
        <i class="icon icon-left icon-plus btn" />
      </router-link>
      <a
        v-if="canExpand"
        @click="expanded=!expanded"
      >
        <slot />
        <span v-if="list">
          <i
            v-if="expanded"
            class="icon-chevron-up"
          />
          <i
            v-else
            class="icon-chevron-down"
          />
        </span>
      </a>
      <span v-else><slot /></span>
    </div>
    <ul v-if="list && expanded">
      <channel
        v-for="(ch, index) in list"
        :key="ch.channelID"
        :channel="ch"
        :current="current"
        :users="users"
        :index="index"
        v-on="$listeners"
      />
    </ul>
  </section>
</template>
<script>
import Channel from 'corteza-webapp-messaging/src/components/Panel/Channels/Channel'

export default {
  components: {
    Channel,
  },

  props: {
    list: {
      type: Array,
      required: true,
    },

    link: {
      type: Object,
      required: false,
      default: undefined,
    },

    current: {
      type: Object,
      required: false,
      default: undefined,
    },

    users: {
      type: Object,
      default: () => ({}),
    },

    canCreate: {
      type: Boolean,
      required: false,
      default: false,
    },

    canExpand: {
      type: Boolean,
      default: false,
    },
  },

  data () {
    return {
      shown: false,
      expanded: true,
    }
  },

  computed: {},
}
</script>
<style scoped lang="scss">
@import 'corteza-webapp-messaging/src/themes/corteza-base/btns.scss';

div {
  display: block;
  font-size: 14px;
  color: $dark;
  margin-top: 10px;
  max-width: 100%;
  padding: .35em 0 0 15px;
  line-height: 30px;
}
ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

a {
  cursor: pointer;
  font-family: $semibold;
}

.icon-plus {
  &.btn {
    padding: 1px;
    float: right;
    margin-right: 7px;
    margin-top: 6px;
    font-size: 12px;
    &:hover{
      color: $dark;
      background: transparent;
      border-color: $dark;
    }
  }
}
</style>
